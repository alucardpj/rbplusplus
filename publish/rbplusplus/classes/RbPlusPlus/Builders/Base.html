<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
  <head>
    <title>Class: RbPlusPlus::Builders::Base</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />

    <script language="JavaScript" type="text/javascript">
    // <![CDATA[

        function toggleSource( id )
        {
          var elem
          var link

          if( document.getElementById )
          {
            elem = document.getElementById( id )
            link = document.getElementById( "l_" + id )
          }
          else if ( document.all )
          {
            elem = eval( "document.all." + id )
            link = eval( "document.all.l_" + id )
          }
          else
            return false;

          if( elem.style.display == "block" )
          {
            elem.style.display = "none"
            link.innerHTML = "show source"
          }
          else
          {
            elem.style.display = "block"
            link.innerHTML = "hide source"
          }
        }

        function openCode( url )
        {
          window.open( url, "SOURCE_CODE", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=480,width=750" ).focus();
        }
      // ]]>
    </script>
  </head>

  <body>
  <table width="100%" border='0' cellpadding='0' cellspacing='0' class='banner'><tr>
  <td class="file-title"><span class="file-title-prefix">Class</span><br />RbPlusPlus::Builders::Base</td>
  <td align="right">
    <table cellspacing="0" cellpadding="2">
      <tr valign="top">
        <td>In:</td>
        <td>
<a href="../../../files/lib/rbplusplus/builders/base_rb.html">lib/rbplusplus/builders/base.rb</a>
        </td>
      </tr>
    <tr>
      <td>Parent:</td>
      <td>
Object
     </td>
   </tr>
         </table>
        </td>
        </tr>
      </table>
 <!-- banner header -->

  <div id="bodyContent">
      <div id="content">

  <div class="description"><p>
Top class for all source generation classes. A builder has three seperate
code &quot;parts&quot; to fill up for the source writer:
</p>
<pre>
  includes
  declarations
  body
</pre>
<p>
includes:
</p>
<pre>
  The list of #include's needed for this builder's code to compile
</pre>
<p>
declarations:
</p>
<pre>
  Any extra required functions or class declarations that will be defined
  outside of the main body of the code
</pre>
<p>
body:
</p>
<pre>
  The body is the code that will go in the main control function
  of the file. For extensions, it's Init_extension_name() { [body] }.
  For classes it's usually a register_ClassName() { [body] }, and so on.
</pre>
<p>
All builders can access their parent and add pieces of code to any of these
three parts
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="#M000028">add_additional_includes</a></li>
  <li><a href="#M000027">add_includes_for</a></li>
  <li><a href="#M000030">additional_includes</a></li>
  <li><a href="#M000029">additional_includes=</a></li>
  <li><a href="#M000033">build</a></li>
  <li><a href="#M000036">build_classes</a></li>
  <li><a href="#M000037">build_enumerations</a></li>
  <li><a href="#M000038">build_function_wrapper</a></li>
  <li><a href="#M000039">build_method_wrapper</a></li>
  <li><a href="#M000026">header_files</a></li>
  <li><a href="#M000023">new</a></li>
  <li><a href="#M000035">qualified_name</a></li>
  <li><a href="#M000024">register_node</a></li>
  <li><a href="#M000025">registered_nodes</a></li>
  <li><a href="#M000032">sources</a></li>
  <li><a href="#M000031">sources=</a></li>
  <li><a href="#M000034">to_s</a></li>
  </ul>





  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>body</td>
    <td class='attr-desc'>
The body code

</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>builders</td>
    <td class='attr-desc'>
Any given builder has a list of sub-builders of any type

</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>declarations</td>
    <td class='attr-desc'>
The list of declarations to add

</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>includes</td>
    <td class='attr-desc'>
<a href="../Builders.html">Builders</a> need to constcuct the following
code parts

<p>
The list of includes this builder needs
</p>
</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>name</td>
    <td class='attr-desc'></td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>node</td>
    <td class='attr-desc'></td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>parent</td>
    <td class='attr-desc'>
Link to the parent builder who created said builder

</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>rice_variable</td>
    <td class='attr-desc'>
The name of the C++ variable related to this builder.

</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>rice_variable_type</td>
    <td class='attr-desc'></td>
  </tr>
  </table>

<div class="sectiontitle">Public Class methods</div>
<div class="method">
  <div class="title">
    <a name="M000030"></a><b>additional_includes</b>()
  </div>
  <div class="description">
  <p>
Get an array of user specified include files
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000030_source')" id="l_M000030_source">show source</a> ]</p>
  <div id="M000030_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 129</span>
129:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">additional_includes</span>
130:         <span class="ruby-ivar">@@additional_includes</span> <span class="ruby-operator">||</span> []
131:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000029"></a><b>additional_includes=</b>(addl)
  </div>
  <div class="description">
  <p>
Set a list of user specified include files
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000029_source')" id="l_M000029_source">show source</a> ]</p>
  <div id="M000029_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 124</span>
124:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">additional_includes=</span>(<span class="ruby-identifier">addl</span>)
125:         <span class="ruby-ivar">@@additional_includes</span> = <span class="ruby-identifier">addl</span>
126:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000023"></a><b>new</b>(name, parser)
  </div>
  <div class="description">
  <p>
Create a <a href="Base.html#M000023">new</a> builder.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000023_source')" id="l_M000023_source">show source</a> ]</p>
  <div id="M000023_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 50</span>
50:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">parser</span>)
51:         <span class="ruby-ivar">@name</span> = <span class="ruby-identifier">name</span>
52:         <span class="ruby-ivar">@node</span> = <span class="ruby-identifier">parser</span>
53:         <span class="ruby-ivar">@builders</span> = []
54:         <span class="ruby-ivar">@includes</span> = []
55:         <span class="ruby-ivar">@declarations</span> = []
56:         <span class="ruby-ivar">@body</span> = []
57:         <span class="ruby-ivar">@registered_nodes</span> = []
58:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000032"></a><b>sources</b>()
  </div>
  <div class="description">
  <p>
Retrieves a list of user specified source files
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000032_source')" id="l_M000032_source">show source</a> ]</p>
  <div id="M000032_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 140</span>
140:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sources</span>
141:         <span class="ruby-ivar">@@sources</span> <span class="ruby-operator">||</span> []
142:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000031"></a><b>sources=</b>(sources)
  </div>
  <div class="description">
  <p>
A list of all the source files. This is used in order to prevent files that
are not in the list from being included and mucking things up
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000031_source')" id="l_M000031_source">show source</a> ]</p>
  <div id="M000031_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 135</span>
135:       <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sources=</span>(<span class="ruby-identifier">sources</span>)
136:         <span class="ruby-ivar">@@sources</span> = <span class="ruby-identifier">sources</span>
137:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div class="method">
  <div class="title">
    <a name="M000028"></a><b>add_additional_includes</b>()
  </div>
  <div class="description">
  <p>
Include any user specified include files
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000028_source')" id="l_M000028_source">show source</a> ]</p>
  <div id="M000028_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 117</span>
117:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_additional_includes</span>
118:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">additional_includes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">inc</span><span class="ruby-operator">|</span>
119:           <span class="ruby-identifier">includes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#include \&quot;#{inc}\&quot;&quot;</span>
120:         <span class="ruby-keyword kw">end</span>
121:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000027"></a><b>add_includes_for</b>(node)
  </div>
  <div class="description">
  <p>
Adds the necessary includes in order to compile the specified node
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000027_source')" id="l_M000027_source">show source</a> ]</p>
  <div id="M000027_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 110</span>
110:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_includes_for</span>(<span class="ruby-identifier">node</span>)
111:         <span class="ruby-identifier">header_files</span>(<span class="ruby-identifier">node</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">header</span><span class="ruby-operator">|</span>
112:           <span class="ruby-identifier">includes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#include \&quot;#{header}\&quot;&quot;</span>
113:         <span class="ruby-keyword kw">end</span>
114:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000033"></a><b>build</b>()
  </div>
  <div class="description">
  <p>
All builders must implement this method
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000033_source')" id="l_M000033_source">show source</a> ]</p>
  <div id="M000033_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 145</span>
145:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build</span>
146:         <span class="ruby-identifier">raise</span> <span class="ruby-value str">&quot;Builder needs to implement #build&quot;</span>
147:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000036"></a><b>build_classes</b>(classes = nil)
  </div>
  <div class="description">
  <p>
Register all classes
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000036_source')" id="l_M000036_source">show source</a> ]</p>
  <div id="M000036_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 176</span>
176:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_classes</span>(<span class="ruby-identifier">classes</span> = <span class="ruby-keyword kw">nil</span>)
177:         <span class="ruby-identifier">classes</span> <span class="ruby-operator">||=</span> [<span class="ruby-ivar">@node</span>.<span class="ruby-identifier">classes</span>, <span class="ruby-ivar">@node</span>.<span class="ruby-identifier">structs</span>].<span class="ruby-identifier">flatten</span>
178:         <span class="ruby-identifier">classes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">klass</span><span class="ruby-operator">|</span>
179:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">ignored?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">moved?</span>
180:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">public?</span>
181:           <span class="ruby-identifier">builder</span> = <span class="ruby-constant">ClassBuilder</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">klass</span>)
182:           <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">build</span>
183:           <span class="ruby-identifier">builders</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">builder</span>
184:         <span class="ruby-keyword kw">end</span>
185:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000037"></a><b>build_enumerations</b>()
  </div>
  <div class="description">
  <p>
Find and wrap up all enumerations
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000037_source')" id="l_M000037_source">show source</a> ]</p>
  <div id="M000037_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 188</span>
188:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_enumerations</span>
189:         <span class="ruby-ivar">@node</span>.<span class="ruby-identifier">enumerations</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">enum</span><span class="ruby-operator">|</span>
190:           <span class="ruby-identifier">builder</span> = <span class="ruby-constant">EnumerationBuilder</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">enum</span>)
191:           <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">build</span>
192:           <span class="ruby-identifier">builders</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">builder</span>
193:         <span class="ruby-keyword kw">end</span>
194:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000038"></a><b>build_function_wrapper</b>(function, append=&quot;&quot;)
  </div>
  <div class="description">
  <p>
Compatibility with Rice 1.0.1&#8216;s explicit self requirement, <a
href="Base.html#M000033">build</a> a quick wrapper that includes a self and
discards it, forwarding the call as needed.
</p>
<p>
Returns: the name of the wrapper function
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000038_source')" id="l_M000038_source">show source</a> ]</p>
  <div id="M000038_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 200</span>
200:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_function_wrapper</span>(<span class="ruby-identifier">function</span>, <span class="ruby-identifier">append</span>=<span class="ruby-value str">&quot;&quot;</span>)
201:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">function</span>.<span class="ruby-identifier">ignored?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">function</span>.<span class="ruby-identifier">moved?</span>
202:         <span class="ruby-identifier">wrapper_func</span> = <span class="ruby-node">&quot;wrap_#{function.qualified_name.gsub(/::/, &quot;_&quot;)}#{append}&quot;</span>
203: 
204:         <span class="ruby-identifier">proto_string</span> = [<span class="ruby-value str">&quot;Rice::Object self&quot;</span>]
205:         <span class="ruby-identifier">call_string</span> = []
206:         <span class="ruby-identifier">function</span>.<span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">arg</span>.<span class="ruby-identifier">cpp_type</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-keyword kw">true</span>), <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">name</span>]}.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">parts</span><span class="ruby-operator">|</span>
207:           <span class="ruby-identifier">type</span> = <span class="ruby-identifier">parts</span>[<span class="ruby-value">0</span>]
208:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">parts</span>[<span class="ruby-value">1</span>]
209:           <span class="ruby-identifier">proto_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{type} #{name}&quot;</span>
210:           <span class="ruby-identifier">call_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{name}&quot;</span>
211:         <span class="ruby-keyword kw">end</span>
212: 
213:         <span class="ruby-identifier">proto_string</span> = <span class="ruby-identifier">proto_string</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;,&quot;</span>)
214:         <span class="ruby-identifier">call_string</span> = <span class="ruby-identifier">call_string</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;,&quot;</span>)
215:         <span class="ruby-identifier">return_type</span> = <span class="ruby-identifier">function</span>.<span class="ruby-identifier">return_type</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-keyword kw">true</span>)
216:         <span class="ruby-identifier">returns</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">return_type</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;void&quot;</span>
217:         <span class="ruby-identifier">returns</span> <span class="ruby-operator">||=</span> <span class="ruby-value str">&quot;return&quot;</span>
218: 
219:         <span class="ruby-identifier">declarations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{return_type} #{wrapper_func}(#{proto_string}) {&quot;</span>
220:         <span class="ruby-identifier">declarations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;\t#{returns} #{function.qualified_name}(#{call_string});&quot;</span>
221:         <span class="ruby-identifier">declarations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;}&quot;</span>
222: 
223:         <span class="ruby-identifier">wrapper_func</span>
224:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000039"></a><b>build_method_wrapper</b>(cls, method, i)
  </div>
  <div class="description">
  <p>
Compatibility with Rice 1.0.1&#8216;s method overloading issues. Build a
quick wrapper that includes a self, forwarding the call as needed.
</p>
<p>
Returns: the name of the wrapper function
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000039_source')" id="l_M000039_source">show source</a> ]</p>
  <div id="M000039_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 230</span>
230:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">build_method_wrapper</span>(<span class="ruby-identifier">cls</span>, <span class="ruby-identifier">method</span>, <span class="ruby-identifier">i</span>)
231:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">ignored?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">method</span>.<span class="ruby-identifier">moved?</span>
232:         <span class="ruby-identifier">wrapper_func</span> = <span class="ruby-node">&quot;wrap_#{method.qualified_name.functionize}_#{i}&quot;</span>
233:         <span class="ruby-identifier">proto_string</span> = [<span class="ruby-node">&quot;#{cls.qualified_name} *self&quot;</span>]
234:         <span class="ruby-identifier">call_string</span> = []
235:         <span class="ruby-identifier">method</span>.<span class="ruby-identifier">arguments</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">arg</span>.<span class="ruby-identifier">cpp_type</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-keyword kw">true</span>), <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">name</span>]}.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">parts</span><span class="ruby-operator">|</span>
236:           <span class="ruby-identifier">type</span> = <span class="ruby-identifier">parts</span>[<span class="ruby-value">0</span>]
237:           <span class="ruby-identifier">name</span> = <span class="ruby-identifier">parts</span>[<span class="ruby-value">1</span>]
238:           <span class="ruby-identifier">proto_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{type} #{name}&quot;</span>
239:           <span class="ruby-identifier">call_string</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{name}&quot;</span>
240:         <span class="ruby-keyword kw">end</span>
241:         
242:         <span class="ruby-identifier">proto_string</span> = <span class="ruby-identifier">proto_string</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;,&quot;</span>)
243:         <span class="ruby-identifier">call_string</span> = <span class="ruby-identifier">call_string</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;,&quot;</span>)
244:         <span class="ruby-identifier">return_type</span> = <span class="ruby-identifier">method</span>.<span class="ruby-identifier">return_type</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-keyword kw">true</span>)
245:         <span class="ruby-identifier">returns</span> = <span class="ruby-value str">&quot;&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">return_type</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;void&quot;</span>
246:         <span class="ruby-identifier">returns</span> <span class="ruby-operator">||=</span> <span class="ruby-value str">&quot;return&quot;</span>
247:         
248:         <span class="ruby-identifier">declarations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{return_type} #{wrapper_func}(#{proto_string}) {&quot;</span>
249:         <span class="ruby-identifier">declarations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;\t#{returns} self-&gt;#{method.qualified_name}(#{call_string});&quot;</span>
250:         <span class="ruby-identifier">declarations</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;}&quot;</span>
251:         
252:         <span class="ruby-identifier">wrapper_func</span>
253:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000026"></a><b>header_files</b>(node)
  </div>
  <div class="description">
  <p>
The name of the header file to include This is the file default, so long as
it matches one of the export files If not this returns all exported files.
</p>
<p>
This was added to workaround badly declared namespaces
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000026_source')" id="l_M000026_source">show source</a> ]</p>
  <div id="M000026_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 103</span>
103:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">header_files</span>(<span class="ruby-identifier">node</span>)
104:         <span class="ruby-identifier">file</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">file_name</span>(<span class="ruby-keyword kw">false</span>)
105:         <span class="ruby-keyword kw">return</span> [<span class="ruby-identifier">file</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">sources</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">file</span>)
106:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">sources</span>
107:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000035"></a><b>qualified_name</b>()
  </div>
  <div class="description">
  <p>
Get the full qualified name of the related gccxml node
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000035_source')" id="l_M000035_source">show source</a> ]</p>
  <div id="M000035_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 171</span>
171:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">qualified_name</span>
172:         <span class="ruby-ivar">@node</span>.<span class="ruby-identifier">qualified_name</span>
173:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000024"></a><b>register_node</b>(node, register_func)
  </div>
  <div class="description">
  <p>
adds a register function to the Init or register of this node
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000024_source')" id="l_M000024_source">show source</a> ]</p>
  <div id="M000024_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 61</span>
61:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">register_node</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">register_func</span>)
62:         <span class="ruby-ivar">@registered_nodes</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">node</span>, <span class="ruby-identifier">register_func</span>]
63:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000025"></a><b>registered_nodes</b>()
  </div>
  <div class="description">
  <p>
Sorts the registered nodes by hierachy, registering the base classes first.
</p>
<p>
this is necessary for Rice to know about inheritance
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000025_source')" id="l_M000025_source">show source</a> ]</p>
  <div id="M000025_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 82</span>
82:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">registered_nodes</span>
83:         <span class="ruby-comment cmt">#sort by hierachy</span>
84:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@registered_nodes</span>.<span class="ruby-identifier">sort_by</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">build</span>, <span class="ruby-identifier">func</span><span class="ruby-operator">|</span>
85:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">build</span>.<span class="ruby-identifier">node</span>.<span class="ruby-identifier">nil?</span>
86:             <span class="ruby-value">0</span>
87:           <span class="ruby-keyword kw">else</span>  
88:             <span class="ruby-identifier">nested_level</span>(<span class="ruby-identifier">build</span>.<span class="ruby-identifier">node</span>)
89:           <span class="ruby-keyword kw">end</span>
90:         <span class="ruby-keyword kw">end</span>
91:         
92:         <span class="ruby-comment cmt">#collect the sorted members</span>
93:         <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">collect</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">node</span>, <span class="ruby-identifier">func</span><span class="ruby-operator">|</span>
94:           <span class="ruby-identifier">func</span>
95:         <span class="ruby-keyword kw">end</span>
96:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="method">
  <div class="title">
    <a name="M000034"></a><b>to_s</b>()
  </div>
  <div class="description">
  <p>
<a href="../Builders.html">Builders</a> should use <a
href="Base.html#M000034">to_s</a> to make finishing touches on the
generated code before it gets written out to a file.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000034_source')" id="l_M000034_source">show source</a> ]</p>
  <div id="M000034_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/rbplusplus/builders/base.rb, line 151</span>
151:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>
152:         <span class="ruby-identifier">extras</span> = []
153:         <span class="ruby-comment cmt">#Weird trailing } needs to be destroyed!!!</span>
154:         <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">flatten</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">strip</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;}&quot;</span>
155:           <span class="ruby-identifier">extras</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">delete_at</span>(<span class="ruby-value">-1</span>)
156:         <span class="ruby-keyword kw">end</span>
157:     
158:         <span class="ruby-keyword kw">return</span> [
159:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">includes</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">uniq</span>, 
160:           <span class="ruby-value str">&quot;&quot;</span>, 
161:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">declarations</span>, 
162:           <span class="ruby-value str">&quot;&quot;</span>, 
163:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">body</span>,
164:           <span class="ruby-value str">&quot;&quot;</span>, 
165:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">registered_nodes</span>, 
166:           <span class="ruby-identifier">extras</span>
167:         ].<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
168:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>

    </body>
</html>